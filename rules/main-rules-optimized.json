{
  "version": "2.0",
  "description": "优化版书源配置文件 - 基于 so-novel 最佳实践",
  "last_updated": "2024-01-01",
  "global_settings": {
    "default_timeout": 15000,
    "default_retry_count": 3,
    "default_concurrent_limit": 3,
    "default_user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
    "default_headers": {
      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
      "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
      "Cache-Control": "no-cache",
      "Connection": "keep-alive"
    },
    "cache": {
      "enabled": true,
      "default_ttl": 3600,
      "preload_next_chapter": true
    },
    "performance": {
      "enable_compression": true,
      "connection_pooling": true,
      "keep_alive": true
    }
  },
  "common_selectors": {
    "book_info": {
      "name": [
        "meta[property=\"og:novel:book_name\"]",
        "meta[property=\"og:title\"]",
        "h1.book-title",
        "#info h1",
        ".book-name",
        "title"
      ],
      "author": [
        "meta[property=\"og:novel:author\"]",
        "meta[name=\"author\"]",
        ".book-author",
        "#info .author",
        ".author"
      ],
      "intro": [
        "meta[name=\"description\"]",
        "meta[property=\"og:description\"]",
        "#intro",
        ".book-intro",
        ".summary"
      ],
      "category": [
        "meta[property=\"og:novel:category\"]",
        ".book-category",
        "#info .type",
        ".category"
      ],
      "cover": [
        "meta[property=\"og:image\"]",
        "#fmimg img",
        ".book-cover img",
        "#info img"
      ],
      "latest_chapter": [
        "meta[property=\"og:novel:latest_chapter_name\"]",
        "#info .last a",
        ".latest-chapter a",
        ".last-chapter"
      ],
      "update_time": [
        "meta[property=\"og:novel:update_time\"]",
        "#info .update",
        ".update-time"
      ],
      "status": [
        "meta[property=\"og:novel:status\"]",
        "#info .status",
        ".book-status"
      ],
      "word_count": [
        "meta[property=\"og:novel:word_count\"]",
        "#info .word-count",
        ".words"
      ]
    },
    "chapter_content": [
      "#content",
      ".content",
      ".read-content",
      "#chapter-content",
      ".chapter-content",
      ".book-content",
      "#book-content",
      ".novel-content",
      "#novel-content",
      ".text",
      "#text",
      "article",
      ".article",
      ".post-content",
      ".entry-content"
    ],
    "chapter_title": [
      ".bookname > h1",
      "#chapter h1",
      ".chapter-title",
      "h1",
      ".title"
    ],
    "toc_list": [
      "dd > a",
      "#list a",
      ".chapter-list a",
      ".volume a",
      ".catalog a"
    ]
  },
  "common_ad_patterns": [
    "\\(本章完\\)",
    "^首页.*书库.*排行.*$",
    "^最新章节目录.*$",
    "^作者：.*?更新时间：.*$",
    "^如遇到内容无法显示或者显示不全.*$",
    "^.*请更换谷歌浏览器.*$",
    "(推广|广告|下载APP|\\bVIP\\b).{0,10}?(立即|扫码|点击)",
    ".*?(记住|收藏).*?(网址|地址).*?",
    ".*?手机.*?(版|端).*?",
    ".*?更新.*?最快.*?",
    ".*?无弹窗.*?",
    ".*?免费.*?阅读.*?",
    "喜欢.*?请.*?收藏.*?",
    "天才一秒记住.*?",
    "一秒记住.*?",
    "手机用户请.*?",
    "支持.*?分享.*?",
    "搜.*?免费看.*?"
  ],
  "css_styles": {
    "default": "body { font-family: 'Microsoft YaHei', '微软雅黑', serif; line-height: 1.8; text-align: justify; padding: 0 5%; } p { margin: 0.8em 0; text-indent: 2em; } img { max-width: 100%; height: auto; }",
    "night_mode": "body { background: #1a1a1a; color: #e0e0e0; font-family: 'Microsoft YaHei', '微软雅黑', serif; line-height: 1.8; text-align: justify; padding: 0 5%; } p { margin: 0.8em 0; text-indent: 2em; } img { max-width: 100%; height: auto; filter: brightness(0.8); }",
    "enhanced": "body { font-family: 'Microsoft YaHei', '微软雅黑', serif; line-height: 1.8; text-align: justify; padding: 0 8%; background: #f8f9fa; } .chapter-content { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } p { margin: 1em 0; text-indent: 2em; } img { max-width: 100%; height: auto; } .ad, .advertisement { display: none !important; }"
  },
  "optimization_features": {
    "fallback_selectors": {
      "description": "为每个关键元素提供多个备用选择器，提高解析成功率",
      "enabled": true
    },
    "smart_caching": {
      "description": "智能缓存策略，减少重复请求",
      "enabled": true,
      "cache_search_results": true,
      "cache_book_info": true,
      "cache_chapters": true
    },
    "error_recovery": {
      "description": "增强的错误处理和恢复机制",
      "enabled": true,
      "auto_retry": true,
      "fallback_encoding": ["utf-8", "gbk", "gb2312"],
      "handle_js_errors": true
    },
    "performance_optimization": {
      "description": "性能优化功能",
      "enabled": true,
      "parallel_chapter_loading": true,
      "image_lazy_loading": true,
      "content_compression": true
    },
    "anti_detection": {
      "description": "反检测机制",
      "enabled": true,
      "random_delays": true,
      "user_agent_rotation": false,
      "request_headers_variation": true
    }
  },
  "rule_template": {
    "id": 0,
    "name": "书源名称",
    "url": "https://example.com/",
    "enabled": true,
    "type": "html",
    "language": "zh_CN",
    "version": "2.0",
    "priority": 1,
    "timeout": 15000,
    "retry_count": 3,
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
    "headers": {
      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
      "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8"
    },
    "enable_js": false,
    "load_timeout": 10000,
    "concurrent_limit": 3,
    "cache": {
      "enabled": true,
      "ttl": 3600,
      "preload_next": true
    },
    "search": {
      "url": "搜索URL",
      "method": "post",
      "data": "{searchkey: %s}",
      "encoding": "utf-8",
      "timeout": 10000,
      "list": ["主选择器", "备用选择器1", "备用选择器2"],
      "name": ["书名选择器1", "书名选择器2"],
      "author": ["作者选择器1", "作者选择器2"],
      "category": ["分类选择器"],
      "latest": ["最新章节选择器"],
      "update": ["更新时间选择器"],
      "status": ["状态选择器"],
      "word_count": ["字数选择器"]
    },
    "book": {
      "name": ["书名选择器数组"],
      "author": ["作者选择器数组"],
      "intro": ["简介选择器数组"],
      "category": ["分类选择器数组"],
      "cover": ["封面选择器数组"],
      "latest": ["最新章节选择器数组"],
      "update": ["更新时间选择器数组"],
      "status": ["状态选择器数组"],
      "word_count": ["字数选择器数组"]
    },
    "toc": {
      "list": ["章节列表选择器数组"],
      "title": "text",
      "url": "href",
      "has_pages": false,
      "next_page": ["下一页选择器数组"],
      "reverse": false,
      "filter_duplicate": true
    },
    "chapter": {
      "title": ["章节标题选择器数组"],
      "content": ["章节内容选择器数组"],
      "next_page": ["下一页选择器数组"],
      "pagination": {
        "enabled": true,
        "max_pages": 10,
        "merge_content": true
      },
      "filter": {
        "remove_tags": ["script", "style", "iframe", "form", "input", "button"],
        "remove_attrs": ["onclick", "onload", "style"],
        "clean_html": true
      },
      "ad_patterns": ["广告正则表达式数组"],
      "format": {
        "paragraph_spacing": true,
        "remove_empty_lines": true,
        "trim_whitespace": true,
        "fix_encoding": true
      }
    },
    "css_inject": {
      "enabled": true,
      "styles": "CSS样式"
    },
    "error_handling": {
      "ignore_ssl_errors": true,
      "follow_redirects": true,
      "max_redirects": 5,
      "handle_404": "skip",
      "handle_timeout": "retry"
    }
  }
}