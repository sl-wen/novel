# å‰åç«¯åˆ†ç¦»éƒ¨ç½²è¯´æ˜

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
slwen.cn (Nginxåå‘ä»£ç†)
â”œâ”€â”€ / (Reactå‰ç«¯ - ç«¯å£3000)
â”œâ”€â”€ /api/novels/* (å°è¯´APIåç«¯ - ç«¯å£8000)
â”œâ”€â”€ /novel/* (å°è¯´APIå…¶ä»–è·¯å¾„ - ç«¯å£8000)
â””â”€â”€ /novel/health (å¥åº·æ£€æŸ¥)
```

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. ç¡®ä¿Reactå‰ç«¯è¿è¡Œåœ¨ç«¯å£3000

ç¡®ä¿æ‚¨çš„Reactåº”ç”¨é…ç½®ä¸ºè¿è¡Œåœ¨ç«¯å£3000ï¼š

```bash
# åœ¨Reacté¡¹ç›®ç›®å½•ä¸­
npm start  # é»˜è®¤è¿è¡Œåœ¨ http://localhost:3000
# æˆ–è€…
yarn start
```

### 2. ç¡®ä¿å°è¯´APIåç«¯è¿è¡Œåœ¨ç«¯å£8000

å°è¯´APIå·²ç»é…ç½®ä¸ºè¿è¡Œåœ¨ç«¯å£8000ï¼Œé€šè¿‡systemdæœåŠ¡ç®¡ç†ï¼š

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status novel-api

# å¯åŠ¨æœåŠ¡
sudo systemctl start novel-api

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u novel-api -f
```

### 3. Nginxé…ç½®

Nginxé…ç½®å·²ç»æ›´æ–°ï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»ï¼š

- **Reactå‰ç«¯**: æ‰€æœ‰æ ¹è·¯å¾„è¯·æ±‚è½¬å‘åˆ°ç«¯å£3000
- **å°è¯´API**: `/api/novels/*` å’Œ `/novel/*` è·¯å¾„è½¬å‘åˆ°ç«¯å£8000
- **é™æ€èµ„æº**: ç¼“å­˜ä¼˜åŒ–

### 4. æµ‹è¯•éƒ¨ç½²

#### æµ‹è¯•Reactå‰ç«¯
```bash
curl https://slwen.cn/
# åº”è¯¥è¿”å›Reactåº”ç”¨çš„HTML
```

#### æµ‹è¯•å°è¯´API
```bash
# æœç´¢API
curl "https://slwen.cn/api/novels/search?keyword=ä¿®çœŸ"

# ä¹¦æºAPI
curl https://slwen.cn/api/novels/sources

# å¥åº·æ£€æŸ¥
curl https://slwen.cn/novel/health
```

#### æµ‹è¯•APIæ–‡æ¡£
```bash
curl https://slwen.cn/novel/docs
# åº”è¯¥è¿”å›FastAPIçš„Swaggeræ–‡æ¡£
```

## ğŸ”§ æ•…éšœæ’é™¤

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥Reactå‰ç«¯
netstat -tlnp | grep 3000

# æ£€æŸ¥å°è¯´API
sudo systemctl status novel-api
netstat -tlnp | grep 8000

# æ£€æŸ¥Nginx
sudo systemctl status nginx
sudo nginx -t
```

### 2. æŸ¥çœ‹æ—¥å¿—

```bash
# Reactå‰ç«¯æ—¥å¿—ï¼ˆå–å†³äºæ‚¨çš„å¯åŠ¨æ–¹å¼ï¼‰
# å¦‚æœä½¿ç”¨PM2: pm2 logs
# å¦‚æœä½¿ç”¨systemd: sudo journalctl -u react-app -f

# å°è¯´APIæ—¥å¿—
sudo journalctl -u novel-api -f

# Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### 3. å¸¸è§é—®é¢˜

#### é—®é¢˜1: Reactåº”ç”¨æ— æ³•è®¿é—®
- æ£€æŸ¥Reactåº”ç”¨æ˜¯å¦åœ¨ç«¯å£3000è¿è¡Œ
- æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å…è®¸ç«¯å£3000

#### é—®é¢˜2: å°è¯´APIè¿”å›404
- æ£€æŸ¥novel-apiæœåŠ¡æ˜¯å¦å¯åŠ¨
- æ£€æŸ¥ç«¯å£8000æ˜¯å¦ç›‘å¬
- æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£ç¡®

#### é—®é¢˜3: é™æ€èµ„æºåŠ è½½å¤±è´¥
- æ£€æŸ¥Reactåº”ç”¨çš„é™æ€èµ„æºè·¯å¾„
- æ£€æŸ¥Nginxçš„é™æ€èµ„æºç¼“å­˜é…ç½®

## ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²

ä½¿ç”¨GitHub Actionsè¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼š

1. **æ¨é€ä»£ç è§¦å‘éƒ¨ç½²**:
   ```bash
   git add .
   git commit -m "æ›´æ–°å‰åç«¯åˆ†ç¦»é…ç½®"
   git push origin main
   ```

2. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**:
   - è®¿é—®GitHubä»“åº“çš„Actionsé¡µé¢
   - æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—å’ŒçŠ¶æ€

3. **éƒ¨ç½²å®Œæˆåæµ‹è¯•**:
   - æµ‹è¯•Reactå‰ç«¯: https://slwen.cn/
   - æµ‹è¯•å°è¯´API: https://slwen.cn/api/novels/search?keyword=ä¿®çœŸ

## ğŸ“ é…ç½®è¯´æ˜

### Nginxè·¯ç”±è§„åˆ™

1. **ä¼˜å…ˆçº§é¡ºåº**:
   - `/api/novels/*` â†’ å°è¯´API (ç«¯å£8000)
   - `/novel/*` â†’ å°è¯´API (ç«¯å£8000)
   - é™æ€èµ„æºæ–‡ä»¶ â†’ Reactå‰ç«¯ (ç«¯å£3000)
   - å…¶ä»–æ‰€æœ‰è·¯å¾„ â†’ Reactå‰ç«¯ (ç«¯å£3000)

2. **ç¼“å­˜ç­–ç•¥**:
   - é™æ€èµ„æº: 1å¹´ç¼“å­˜
   - å°è¯´ä¸‹è½½æ–‡ä»¶: 1å¤©ç¼“å­˜
   - APIå“åº”: ä¸ç¼“å­˜

3. **è¶…æ—¶è®¾ç½®**:
   - å°è¯´API: 60ç§’è¶…æ—¶
   - Reactå‰ç«¯: é»˜è®¤è¶…æ—¶

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **é˜²ç«å¢™é…ç½®**:
   - åªå¼€æ”¾80å’Œ443ç«¯å£
   - å†…éƒ¨ç«¯å£3000å’Œ8000ä¸å¯¹å¤–æš´éœ²

2. **HTTPSé…ç½®**:
   - å»ºè®®é…ç½®SSLè¯ä¹¦
   - ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦

3. **è®¿é—®æ§åˆ¶**:
   - æ ¹æ®éœ€è¦é…ç½®è®¿é—®é™åˆ¶
   - è€ƒè™‘æ·»åŠ APIé™æµ

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
2. ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™
3. Nginxé…ç½®è¯­æ³•
4. ç«¯å£å ç”¨æƒ…å†µ 